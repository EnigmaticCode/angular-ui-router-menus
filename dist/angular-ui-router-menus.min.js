/**
 * angular-ui-router state derived menu, nav, navbar, tab and other navigation tools
 * @version v0.2.1-dev-2014-10-30
 * @link https://github.com/nitintutlani/angular-ui-router-menus
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a,b){"use strict";function c(a){var b=a.replace(/[.+^$()|{}]/g,function(a,b,c){return"\\"===c[b-1]?a:"\\"+a});return b=b.replace(/[?*]/g,function(a,b,c){return"\\"===c[b-1]?a:"?"===a?".":".*"}),b=b.replace(/\\([dDsSwWtrnvfbB0cxu])/g,"$1"),"^"+b+"$"}function d(a){var b=[];if(g(a)&&(a=a.split(" ")),h(a))for(var d=0;d<a.length;d++)b.push(c(a[d]));return b}function e(a,b){if(h(a))for(var c=0;c<a.length;c++)if(b.match(a[c]))return!0;return!1}var f=b.isDefined,g=(b.isFunction,b.isString),h=(b.isObject,b.isArray),i=b.forEach,j=(b.extend,b.copy,b.equals,b.noop,b.module("ui.router.menus",["ng","ui.router"]));j.directive("menus",["$menus",function(a){return{link:{restrict:"EA",scope:{menus:"=",type:"@",include:"@",tag:"@"},pre:function(b,c,d){var e={};f(d.type)&&(e.type=d.type),f(d.include)&&(e.include=d.include),f(d.tag)&&(e.tag=d.tag),b[d.menus]=a.get(e)}}}}]),j.service("$menus",["$state",function(a){function b(a){if(!a.menu)return null;var b;return"string"==typeof a.menu?b={name:a.menu,state:a}:(b=a.menu,b.state=a),b}var c;this.findMenu=function(a){for(var b=0;b<c.length;b++)if(a===c[b].state.name)return c[b];return null},this.parent=function(a){var b=this.findMenu(a);if(b){if(f(b.state.parent)&&b.state.parent)return this.findMenu(b.state.parent);var c=/^(.+)\.[^.]+$/.exec(b.state.name);return c?this.findMenu(c[1]):null}return null},this.findByParent=function(a){var b=this,d=c.filter(function(c){var d=b.parent(c.state.name);return!!d&&a===d.state.name});return d},this.getTree=function(a){var b,d=this;return b=a?this.findByParent(a.state.name):c.filter(function(a){return!d.parent(a.state.name)}),i(b,function(a){a.children=d.getTree(a),a.hasChild=f(a.children)&&h(a.children)?!!a.children.length:!1}),b},this.get=function(g){g=g||{},c=[];var h=a.get(),j=g.include||null;j&&(j=d(j),h=h.filter(function(a){return e(j,a.name)}));var k=g.tag||null;k&&(k=d(k)),i(h,function(a){var d=b(a);d&&(k?f(d.tag)&&e(k,d.tag)&&c.push(d):c.push(d))});var l=g.type||"list";return"tree"===l?this.getTree():c}}])}(window,window.angular);